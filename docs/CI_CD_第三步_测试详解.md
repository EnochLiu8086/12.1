# CI/CD ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæµ‹è¯•ï¼ˆpytestï¼‰è¯¦è§£

## ğŸ¯ ä»€ä¹ˆæ˜¯æµ‹è¯•ï¼Ÿ

### ç®€å•ç†è§£

**æµ‹è¯•å°±åƒè€ƒè¯•é¢˜ï¼š**
- ä½ å†™äº†ä¸€æ®µä»£ç ï¼ˆæ¯”å¦‚ä¸€ä¸ªå‡½æ•°ï¼‰
- æµ‹è¯•ä¼šéªŒè¯ï¼šè¿™æ®µä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿ
- æµ‹è¯•ä¼šæ£€æŸ¥ï¼šè¾“å…¥æ­£ç¡®çš„æ•°æ®ï¼Œæ˜¯å¦å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Ÿ

**ä¾‹å­ï¼š**
```python
# ä½ å†™çš„ä»£ç 
def add(a, b):
    return a + b

# æµ‹è¯•ä»£ç 
def test_add():
    assert add(1, 2) == 3  # æµ‹è¯•ï¼š1 + 2 åº”è¯¥ç­‰äº 3
    assert add(0, 0) == 0  # æµ‹è¯•ï¼š0 + 0 åº”è¯¥ç­‰äº 0
```

å¦‚æœæµ‹è¯•é€šè¿‡ âœ…ï¼Œè¯´æ˜ä½ çš„ä»£ç å·¥ä½œæ­£å¸¸ã€‚
å¦‚æœæµ‹è¯•å¤±è´¥ âŒï¼Œè¯´æ˜ä»£ç æœ‰é—®é¢˜ï¼Œéœ€è¦ä¿®å¤ã€‚

---

## ğŸ“ æµ‹è¯•æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

### é¡¹ç›®ç»“æ„

```
ä½ çš„é¡¹ç›®/
â”œâ”€â”€ tests/                    â† æ‰€æœ‰æµ‹è¯•æ–‡ä»¶éƒ½åœ¨è¿™é‡Œ
â”‚   â”œâ”€â”€ __init__.py          â† Python åŒ…æ ‡è¯†æ–‡ä»¶
â”‚   â”œâ”€â”€ conftest.py          â† pytest é…ç½®å’Œå…±äº«å·¥å…·
â”‚   â”œâ”€â”€ test_server.py       â† æµ‹è¯•æœåŠ¡å™¨ï¼ˆAPIï¼‰
â”‚   â””â”€â”€ test_models.py       â† æµ‹è¯•æ¨¡å‹ç®¡ç†
â””â”€â”€ engine/                  â† è¢«æµ‹è¯•çš„ä»£ç 
    â”œâ”€â”€ server.py            â† æœåŠ¡å™¨ä»£ç 
    â””â”€â”€ models.py             â† æ¨¡å‹ä»£ç 
```

### å‘½åè§„åˆ™

- æµ‹è¯•æ–‡ä»¶å¿…é¡»ä»¥ `test_` å¼€å¤´ï¼š`test_server.py`
- æµ‹è¯•å‡½æ•°å¿…é¡»ä»¥ `test_` å¼€å¤´ï¼š`test_health_endpoint()`

---

## ğŸ” æµ‹è¯•æ–‡ä»¶è¯¦è§£

### 1. `tests/test_server.py` - æµ‹è¯•æœåŠ¡å™¨

è¿™ä¸ªæ–‡ä»¶æµ‹è¯•ä½ çš„ **FastAPI æœåŠ¡å™¨** æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

#### æµ‹è¯• 1ï¼šæ ¹ç«¯ç‚¹æµ‹è¯•

```python
@pytest.mark.unit
def test_root_endpoint():
    """æµ‹è¯•æ ¹ç«¯ç‚¹å¥åº·æ£€æŸ¥"""
    response = client.get("/")  # è®¿é—®æ ¹è·¯å¾„ "/"
    assert response.status_code == 200  # åº”è¯¥è¿”å› 200ï¼ˆæˆåŠŸï¼‰
    data = response.json()
    assert data["status"] == "ok"  # çŠ¶æ€åº”è¯¥æ˜¯ "ok"
    assert data["service"] == "NeuroBreak API"  # æœåŠ¡ååº”è¯¥æ­£ç¡®
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- è®¿é—®æœåŠ¡å™¨çš„æ ¹è·¯å¾„ `/`
- æ£€æŸ¥æ˜¯å¦è¿”å› 200 çŠ¶æ€ç 
- æ£€æŸ¥è¿”å›çš„æ•°æ®æ˜¯å¦æ­£ç¡®

**å°±åƒï¼š** ä½ æ‰“å¼€ç½‘ç«™é¦–é¡µï¼Œçœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚

#### æµ‹è¯• 2ï¼šå¥åº·æ£€æŸ¥ç«¯ç‚¹

```python
@pytest.mark.unit
def test_health_endpoint():
    """æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹"""
    response = client.get("/health")  # è®¿é—® /health
    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "healthy"  # åº”è¯¥è¿”å› "healthy"
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- è®¿é—® `/health` ç«¯ç‚¹ï¼ˆå¥åº·æ£€æŸ¥ï¼‰
- æ£€æŸ¥æ˜¯å¦è¿”å› "healthy"

**å°±åƒï¼š** æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿˜æ´»ç€ã€‚

#### æµ‹è¯• 3ï¼šè¯·æ±‚æ ¼å¼éªŒè¯

```python
@pytest.mark.unit
def test_pipeline_endpoint_request_validation():
    """æµ‹è¯• pipeline ç«¯ç‚¹è¯·æ±‚æ ¼å¼éªŒè¯"""
    incomplete_request = {
        "prompt": "æµ‹è¯•",
        # ç¼ºå°‘ inferenceConfig å’Œ guardConfig
    }
    response = client.post("/api/pipeline/run", json=incomplete_request)
    assert response.status_code == 422  # åº”è¯¥è¿”å› 422ï¼ˆæ ¼å¼é”™è¯¯ï¼‰
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- å‘é€ä¸€ä¸ª**ä¸å®Œæ•´**çš„è¯·æ±‚ï¼ˆç¼ºå°‘å¿…éœ€å­—æ®µï¼‰
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®è¿”å›é”™è¯¯ï¼ˆ422ï¼‰

**å°±åƒï¼š** ä½ å¡«å†™è¡¨å•æ—¶æ¼å¡«äº†å¿…å¡«é¡¹ï¼Œç³»ç»Ÿåº”è¯¥æç¤ºé”™è¯¯ã€‚

#### æµ‹è¯• 4ï¼šé›†æˆæµ‹è¯•ï¼ˆå®Œæ•´æµç¨‹ï¼‰

```python
@pytest.mark.integration
def test_pipeline_endpoint_with_mock():
    """æµ‹è¯• pipeline ç«¯ç‚¹ï¼ˆä½¿ç”¨ mockï¼Œä¸åŠ è½½çœŸå®æ¨¡å‹ï¼‰"""
    request_data = {
        "prompt": "æµ‹è¯•æç¤º",
        "inferenceConfig": {...},
        "guardConfig": {...},
    }
    
    response = client.post("/api/pipeline/run", json=request_data)
    # æ¥å— 200ï¼ˆæˆåŠŸï¼‰æˆ– 500ï¼ˆæ¨¡å‹æœªåŠ è½½ï¼‰ï¼Œä½†ä¸æ¥å— 422ï¼ˆæ ¼å¼é”™è¯¯ï¼‰
    assert response.status_code in [200, 500]
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- å‘é€ä¸€ä¸ª**å®Œæ•´**çš„è¯·æ±‚
- åœ¨ CI ç¯å¢ƒä¸­ï¼Œæ¨¡å‹å¯èƒ½æ²¡åŠ è½½ï¼ˆè¿”å› 500ï¼‰ï¼Œä½†è‡³å°‘éªŒè¯äº†è¯·æ±‚æ ¼å¼æ­£ç¡®

**å°±åƒï¼š** æµ‹è¯•å®Œæ•´çš„æµç¨‹ï¼Œå³ä½¿æŸäº›æ­¥éª¤å› ä¸ºç¯å¢ƒé™åˆ¶æ— æ³•å®Œæˆã€‚

---

### 2. `tests/test_models.py` - æµ‹è¯•æ¨¡å‹ç®¡ç†

è¿™ä¸ªæ–‡ä»¶æµ‹è¯•ä½ çš„ **æ¨¡å‹ç®¡ç†æ¨¡å—** æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

#### æµ‹è¯• 1ï¼šæ•°æ®ç±»å‹è§£æ

```python
@pytest.mark.unit
def test_resolve_dtype():
    """æµ‹è¯•æ•°æ®ç±»å‹è§£æå‡½æ•°"""
    from engine.models import resolve_dtype
    import torch
    
    dtype = resolve_dtype()
    # æ£€æŸ¥è¿”å›çš„æ•°æ®ç±»å‹æ˜¯å¦åœ¨å…è®¸çš„èŒƒå›´å†…
    assert dtype in [torch.float32, torch.float16, torch.bfloat16]
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- è°ƒç”¨ `resolve_dtype()` å‡½æ•°
- æ£€æŸ¥è¿”å›çš„æ•°æ®ç±»å‹æ˜¯å¦æ­£ç¡®

**å°±åƒï¼š** æµ‹è¯•ä¸€ä¸ªå·¥å…·å‡½æ•°æ˜¯å¦èƒ½æ­£ç¡®å·¥ä½œã€‚

#### æµ‹è¯• 2ï¼šæ¨¡å‹è·¯å¾„è§£æ

```python
@pytest.mark.unit
def test_get_model_path_fallback():
    """æµ‹è¯•æ¨¡å‹è·¯å¾„è§£æå‡½æ•°ï¼ˆfallback åˆ° HuggingFace IDï¼‰"""
    result = get_model_path(
        model_id="test/model",
        local_path="/nonexistent/path",  # ä¸å­˜åœ¨çš„è·¯å¾„
        container_path="/nonexistent/container",
        workspace_path="",
    )
    assert result == "test/model"  # åº”è¯¥è¿”å› HuggingFace ID
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- æµ‹è¯•å½“æœ¬åœ°è·¯å¾„ä¸å­˜åœ¨æ—¶
- å‡½æ•°æ˜¯å¦èƒ½æ­£ç¡® fallback åˆ° HuggingFace ID

**å°±åƒï¼š** æµ‹è¯•å¤‡ç”¨æ–¹æ¡ˆæ˜¯å¦æœ‰æ•ˆã€‚

#### æµ‹è¯• 3ï¼šå•ä¾‹æ¨¡å¼

```python
@pytest.mark.unit
def test_model_manager_singleton():
    """æµ‹è¯• ModelManager å•ä¾‹æ¨¡å¼"""
    manager1 = ModelManager()
    manager2 = ModelManager()
    assert manager1 is manager2  # åº”è¯¥æ˜¯åŒä¸€ä¸ªå¯¹è±¡
```

**è¿™ä¸ªæµ‹è¯•åœ¨åšä»€ä¹ˆï¼Ÿ**
- åˆ›å»ºä¸¤ä¸ª ModelManager å¯¹è±¡
- æ£€æŸ¥å®ƒä»¬æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰

**å°±åƒï¼š** æµ‹è¯•è®¾è®¡æ¨¡å¼æ˜¯å¦æ­£ç¡®å®ç°ã€‚

---

### 3. `tests/conftest.py` - æµ‹è¯•é…ç½®

è¿™ä¸ªæ–‡ä»¶æä¾›**å…±äº«çš„å·¥å…·å’Œé…ç½®**ï¼Œæ‰€æœ‰æµ‹è¯•éƒ½å¯ä»¥ä½¿ç”¨ã€‚

#### Mock æ¨¡å‹åŠ è½½

```python
@pytest.fixture(autouse=True)
def mock_model_loading():
    """åœ¨ CI ç¯å¢ƒä¸­è‡ªåŠ¨ mock æ¨¡å‹åŠ è½½"""
    if os.getenv("SKIP_MODEL_LOAD", "false").lower() == "true":
        # ä½¿ç”¨ mock å¯¹è±¡æ›¿ä»£çœŸå®çš„æ¨¡å‹åŠ è½½
        with patch("engine.models.AutoModelForCausalLM.from_pretrained"):
            yield
```

**è¿™ä¸ªåœ¨åšä»€ä¹ˆï¼Ÿ**
- åœ¨ CI ç¯å¢ƒä¸­ï¼Œä¸åŠ è½½çœŸå®çš„æ¨¡å‹ï¼ˆå¤ªæ…¢ã€å¤ªå¤§ï¼‰
- ä½¿ç”¨ **mockï¼ˆæ¨¡æ‹Ÿå¯¹è±¡ï¼‰** æ›¿ä»£çœŸå®æ¨¡å‹
- è®©æµ‹è¯•èƒ½å¿«é€Ÿè¿è¡Œ

**å°±åƒï¼š** è€ƒè¯•æ—¶ç”¨å‡çš„é“å…·ï¼Œä¸ç”¨çœŸçš„è®¾å¤‡ã€‚

---

## ğŸ·ï¸ æµ‹è¯•æ ‡è®°ï¼ˆMarkersï¼‰

### ä»€ä¹ˆæ˜¯æ ‡è®°ï¼Ÿ

æ ‡è®°ç”¨æ¥**åˆ†ç±»æµ‹è¯•**ï¼Œå¯ä»¥åªè¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•ã€‚

### ä¸‰ç§æ ‡è®°

1. **`@pytest.mark.unit`** - å•å…ƒæµ‹è¯•
   - æµ‹è¯•å•ä¸ªå‡½æ•°æˆ–æ¨¡å—
   - è¿è¡Œé€Ÿåº¦å¿«
   - ä¸ä¾èµ–å¤–éƒ¨èµ„æº

2. **`@pytest.mark.integration`** - é›†æˆæµ‹è¯•
   - æµ‹è¯•å¤šä¸ªæ¨¡å—çš„åä½œ
   - å¯èƒ½éœ€è¦å¤–éƒ¨èµ„æº
   - è¿è¡Œæ—¶é—´è¾ƒé•¿

3. **`@pytest.mark.slow`** - æ…¢é€Ÿæµ‹è¯•
   - è¿è¡Œæ—¶é—´å¾ˆé•¿çš„æµ‹è¯•
   - å¯ä»¥è·³è¿‡

### å¦‚ä½•ä½¿ç”¨æ ‡è®°ï¼Ÿ

```bash
# åªè¿è¡Œå•å…ƒæµ‹è¯•
pytest -m unit

# åªè¿è¡Œé›†æˆæµ‹è¯•
pytest -m integration

# è·³è¿‡æ…¢é€Ÿæµ‹è¯•
pytest -m "not slow"

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest
```

---

## ğŸš€ å¦‚ä½•è¿è¡Œæµ‹è¯•ï¼Ÿ

### åœ¨æœ¬åœ°è¿è¡Œ

```bash
# 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# 2. è¿è¡Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
pytest -v

# 3. è¿è¡Œå¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=engine --cov-report=html

# 4. åªè¿è¡Œå•å…ƒæµ‹è¯•
pytest -m unit

# 5. è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest tests/test_server.py

# 6. è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_server.py::test_health_endpoint
```

### åœ¨ CI/CD ä¸­è¿è¡Œ

CI/CD ä¼šè‡ªåŠ¨è¿è¡Œï¼š
```bash
pytest tests/ -v --cov=engine --cov-report=xml --cov-report=term
```

**å‚æ•°è¯´æ˜ï¼š**
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- `--cov=engine`: æµ‹è¯• `engine` ç›®å½•çš„ä»£ç è¦†ç›–ç‡
- `--cov-report=xml`: ç”Ÿæˆ XML æ ¼å¼çš„è¦†ç›–ç‡æŠ¥å‘Š
- `--cov-report=term`: åœ¨ç»ˆç«¯æ˜¾ç¤ºè¦†ç›–ç‡

---

## ğŸ“Š ä»£ç è¦†ç›–ç‡

### ä»€ä¹ˆæ˜¯è¦†ç›–ç‡ï¼Ÿ

**è¦†ç›–ç‡ = è¢«æµ‹è¯•çš„ä»£ç  / æ€»ä»£ç **

**ä¾‹å­ï¼š**
- ä½ æœ‰ 100 è¡Œä»£ç 
- æµ‹è¯•è¦†ç›–äº† 80 è¡Œ
- è¦†ç›–ç‡ = 80%

### ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ

- âœ… è¦†ç›–ç‡è¶Šé«˜ï¼Œè¯´æ˜æµ‹è¯•è¶Šå…¨é¢
- âœ… çŸ¥é“å“ªäº›ä»£ç è¿˜æ²¡æµ‹è¯•
- âœ… å¸®åŠ©å‘ç°æ½œåœ¨çš„ bug

### æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š

```bash
# ç”Ÿæˆ HTML æŠ¥å‘Š
pytest --cov=engine --cov-report=html

# æ‰“å¼€æŠ¥å‘Š
open htmlcov/index.html  # macOS
start htmlcov/index.html  # Windows
```

æŠ¥å‘Šä¼šæ˜¾ç¤ºï¼š
- å“ªäº›ä»£ç è¢«æµ‹è¯•äº†ï¼ˆç»¿è‰²ï¼‰
- å“ªäº›ä»£ç æ²¡è¢«æµ‹è¯•ï¼ˆçº¢è‰²ï¼‰
- è¦†ç›–ç‡ç™¾åˆ†æ¯”

---

## ğŸ­ Mockï¼ˆæ¨¡æ‹Ÿå¯¹è±¡ï¼‰

### ä»€ä¹ˆæ˜¯ Mockï¼Ÿ

**Mock = å‡çš„ã€æ¨¡æ‹Ÿçš„å¯¹è±¡**

**ä¸ºä»€ä¹ˆéœ€è¦ Mockï¼Ÿ**

1. **çœŸå®æ¨¡å‹å¤ªå¤§**
   - çœŸå®æ¨¡å‹å¯èƒ½æœ‰å‡  GB
   - ä¸‹è½½å’ŒåŠ è½½éœ€è¦å¾ˆé•¿æ—¶é—´

2. **æµ‹è¯•ç¯å¢ƒé™åˆ¶**
   - CI ç¯å¢ƒå¯èƒ½æ²¡æœ‰ GPU
   - å¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„èµ„æº

3. **æµ‹è¯•é€Ÿåº¦**
   - Mock å¯¹è±¡åˆ›å»ºå¾ˆå¿«
   - æµ‹è¯•å¯ä»¥å¿«é€Ÿè¿è¡Œ

### Mock ç¤ºä¾‹

```python
# çœŸå®ä»£ç ï¼ˆä¼šåŠ è½½çœŸå®æ¨¡å‹ï¼‰
model = AutoModelForCausalLM.from_pretrained("meta-llama/Llama-3.2-3B-Instruct")

# Mock ä»£ç ï¼ˆä½¿ç”¨å‡å¯¹è±¡ï¼‰
mock_model = Mock()  # åˆ›å»ºä¸€ä¸ªå‡å¯¹è±¡
# æµ‹è¯•æ—¶ä½¿ç”¨ mock_modelï¼Œä¸åŠ è½½çœŸå®æ¨¡å‹
```

**å°±åƒï¼š** æ‹ç”µå½±æ—¶ç”¨é“å…·ï¼Œä¸ç”¨çœŸçš„ä¸œè¥¿ã€‚

---

## âŒ æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

### å¸¸è§å¤±è´¥åŸå› 

#### 1. æµ‹è¯•æ–­è¨€å¤±è´¥

```python
# æµ‹è¯•æœŸæœ›
assert response.status_code == 200

# å®é™…ç»“æœ
response.status_code == 500  # ä¸åŒ¹é…ï¼

# é”™è¯¯ä¿¡æ¯
AssertionError: assert 500 == 200
```

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ä»£ç é€»è¾‘
- ä¿®å¤ bug
- æˆ–è€…ä¿®å¤æµ‹è¯•ï¼ˆå¦‚æœæµ‹è¯•æœ¬èº«æœ‰é—®é¢˜ï¼‰

#### 2. å¯¼å…¥é”™è¯¯

```python
# é”™è¯¯
ImportError: cannot import name 'xxx' from 'engine.server'
```

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

#### 3. æ¨¡å‹åŠ è½½å¤±è´¥ï¼ˆåœ¨ CI ä¸­ï¼‰

```python
# é”™è¯¯
RuntimeError: Failed to load model
```

**è§£å†³æ–¹æ³•ï¼š**
- ç¡®ä¿è®¾ç½®äº† `SKIP_MODEL_LOAD=true`
- æ£€æŸ¥ `conftest.py` ä¸­çš„ mock é…ç½®

---

## ğŸ“ å¦‚ä½•ç¼–å†™æ–°æµ‹è¯•ï¼Ÿ

### æ­¥éª¤ 1ï¼šåˆ›å»ºæµ‹è¯•å‡½æ•°

```python
# tests/test_example.py
import pytest

@pytest.mark.unit
def test_my_function():
    """æµ‹è¯•æˆ‘çš„å‡½æ•°"""
    from engine.example import my_function
    
    result = my_function("input")
    assert result == "expected_output"
```

### æ­¥éª¤ 2ï¼šè¿è¡Œæµ‹è¯•

```bash
pytest tests/test_example.py
```

### æ­¥éª¤ 3ï¼šæ£€æŸ¥ç»“æœ

- âœ… é€šè¿‡ï¼šæµ‹è¯•æˆåŠŸ
- âŒ å¤±è´¥ï¼šä¿®å¤ä»£ç æˆ–æµ‹è¯•

---

## ğŸ¯ æ€»ç»“

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæµ‹è¯•ï¼ˆpytestï¼‰åšäº†ä»€ä¹ˆï¼Ÿ

1. âœ… **è¿è¡Œæ‰€æœ‰æµ‹è¯•** - æ£€æŸ¥ä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ
2. âœ… **ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š** - çŸ¥é“å“ªäº›ä»£ç è¢«æµ‹è¯•äº†
3. âœ… **ä½¿ç”¨ Mock** - åœ¨ CI ç¯å¢ƒä¸­ä¸åŠ è½½çœŸå®æ¨¡å‹
4. âœ… **åˆ†ç±»æµ‹è¯•** - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•åˆ†å¼€è¿è¡Œ

### æµ‹è¯•çš„å¥½å¤„

- ğŸ¯ **å‘ç° bug** - åœ¨ä»£ç ä¸Šçº¿å‰å‘ç°é—®é¢˜
- ğŸ¯ **ä¿è¯è´¨é‡** - ç¡®ä¿ä»£ç èƒ½æ­£å¸¸å·¥ä½œ
- ğŸ¯ **æ–‡æ¡£ä½œç”¨** - æµ‹è¯•å°±æ˜¯ä»£ç çš„ä½¿ç”¨ç¤ºä¾‹
- ğŸ¯ **é‡æ„å®‰å…¨** - ä¿®æ”¹ä»£ç æ—¶ï¼Œæµ‹è¯•èƒ½ç¡®ä¿åŠŸèƒ½æ­£å¸¸

---

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `tests/test_server.py` - æœåŠ¡å™¨æµ‹è¯•
- `tests/test_models.py` - æ¨¡å‹æµ‹è¯•
- `tests/conftest.py` - æµ‹è¯•é…ç½®
- `pyproject.toml` - pytest é…ç½®

---

**ç°åœ¨ä½ ç†è§£ç¬¬ä¸‰æ­¥äº†å—ï¼Ÿ** å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹æµ‹è¯•æ–‡ä»¶ä»£ç 
2. è¿è¡Œ `pytest` çœ‹çœ‹å®é™…æ•ˆæœ
3. æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š


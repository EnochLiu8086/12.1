# GitHub Container Registry ç™»å½•æ­¥éª¤è¯´æ˜

## ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç™»å½•æ­¥éª¤ï¼Ÿ

### ç®€å•ç†è§£

**å°±åƒä¸Šä¼ æ–‡ä»¶åˆ°ç½‘ç›˜ï¼š**
- ä½ éœ€è¦å…ˆç™»å½•è´¦å·
- ç„¶åæ‰èƒ½ä¸Šä¼ æ–‡ä»¶
- æ²¡æœ‰ç™»å½•ï¼Œç³»ç»Ÿä¸çŸ¥é“ä½ æ˜¯è°ï¼Œæ— æ³•ä¸Šä¼ 

**GitHub Container Registry ä¹Ÿæ˜¯ä¸€æ ·ï¼š**
- éœ€è¦å…ˆç™»å½•ï¼ˆéªŒè¯èº«ä»½ï¼‰
- ç„¶åæ‰èƒ½æ¨é€é•œåƒ
- æ²¡æœ‰ç™»å½•ï¼Œæ— æ³•æ¨é€é•œåƒ

---

## ğŸ“‹ ä»£ç è§£æ

```yaml
- name: Log in to GitHub Container Registry
  if: github.event_name != 'pull_request'
  uses: docker/login-action@v3
  with:
    registry: ghcr.io
    username: ${{ github.actor }}
    password: ${{ secrets.GITHUB_TOKEN }}
```

### é€è¡Œè§£é‡Š

#### ç¬¬ 1 è¡Œï¼šæ­¥éª¤åç§°
```yaml
- name: Log in to GitHub Container Registry
```
**ä½œç”¨ï¼š** ç»™è¿™ä¸ªæ­¥éª¤èµ·ä¸ªåå­—ï¼Œæ–¹ä¾¿åœ¨æ—¥å¿—ä¸­æŸ¥çœ‹

---

#### ç¬¬ 2 è¡Œï¼šæ¡ä»¶åˆ¤æ–­
```yaml
if: github.event_name != 'pull_request'
```

**ä½œç”¨ï¼š** åªåœ¨é PR æ—¶æ‰§è¡Œ

**ä¸ºä»€ä¹ˆï¼Ÿ**
- âœ… **Push åˆ°ä¸»åˆ†æ”¯** â†’ éœ€è¦ç™»å½•å¹¶æ¨é€é•œåƒ
- âŒ **Pull Request** â†’ ä¸éœ€è¦æ¨é€é•œåƒï¼ˆåªæ„å»ºéªŒè¯ï¼‰

**å°±åƒï¼š** åªæœ‰æ­£å¼æäº¤ä½œä¸šæ—¶æ‰ä¸Šä¼ ï¼Œè‰ç¨¿ä¸éœ€è¦ä¸Šä¼ 

---

#### ç¬¬ 3 è¡Œï¼šä½¿ç”¨ç™»å½• Action
```yaml
uses: docker/login-action@v3
```

**ä½œç”¨ï¼š** ä½¿ç”¨ GitHub Actions çš„ Docker ç™»å½•å·¥å…·

**å°±åƒï¼š** ä½¿ç”¨ä¸“é—¨çš„ç™»å½•å·¥å…·

---

#### ç¬¬ 4-6 è¡Œï¼šç™»å½•ä¿¡æ¯
```yaml
with:
  registry: ghcr.io
  username: ${{ github.actor }}
  password: ${{ secrets.GITHUB_TOKEN }}
```

**è¯¦ç»†è§£é‡Šï¼š**

1. **`registry: ghcr.io`**
   - æŒ‡å®šè¦ç™»å½•çš„ä»“åº“åœ°å€
   - `ghcr.io` = GitHub Container Registry çš„åŸŸå

2. **`username: ${{ github.actor }}`**
   - ç”¨æˆ·å = GitHub ç”¨æˆ·åï¼ˆè‡ªåŠ¨è·å–ï¼‰
   - `${{ github.actor }}` = è§¦å‘ CI/CD çš„ç”¨æˆ·å
   - ä¾‹å¦‚ï¼šä½ çš„ GitHub ç”¨æˆ·å

3. **`password: ${{ secrets.GITHUB_TOKEN }}`**
   - å¯†ç  = GitHub è‡ªåŠ¨ç”Ÿæˆçš„ Token
   - `GITHUB_TOKEN` = GitHub è‡ªåŠ¨æä¾›çš„è®¿é—®ä»¤ç‰Œ
   - **æ— éœ€æ‰‹åŠ¨é…ç½®ï¼** GitHub è‡ªåŠ¨æä¾›

---

## ğŸ”‘ å…³é”®ç‚¹ï¼šGITHUB_TOKEN

### ä»€ä¹ˆæ˜¯ GITHUB_TOKENï¼Ÿ

**GitHub è‡ªåŠ¨æä¾›çš„è®¿é—®ä»¤ç‰Œï¼š**
- âœ… æ¯ä¸ª CI/CD è¿è¡Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆ
- âœ… æ— éœ€æ‰‹åŠ¨é…ç½®
- âœ… æœ‰æƒé™è®¿é—®å½“å‰ä»“åº“
- âœ… å¯ä»¥æ¨é€é•œåƒåˆ° GitHub Container Registry

**å°±åƒï¼š** GitHub è‡ªåŠ¨ç»™ä½ ä¸€å¼ ä¸´æ—¶é€šè¡Œè¯

---

## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€æ­¥ï¼Ÿ

### åœºæ™¯ 1ï¼šæ²¡æœ‰ç™»å½•æ­¥éª¤

```
æ„å»ºé•œåƒ
    â†“
å°è¯•æ¨é€é•œåƒ
    â†“
âŒ é”™è¯¯ï¼šæœªæˆæƒï¼ˆunauthorizedï¼‰
    â†“
æ¨é€å¤±è´¥
```

**ç»“æœï¼š** é•œåƒæ— æ³•æ¨é€

---

### åœºæ™¯ 2ï¼šæœ‰ç™»å½•æ­¥éª¤

```
ç™»å½• GitHub Container Registry
    â†“
âœ… èº«ä»½éªŒè¯æˆåŠŸ
    â†“
æ„å»ºé•œåƒ
    â†“
æ¨é€é•œåƒ
    â†“
âœ… æ¨é€æˆåŠŸ
```

**ç»“æœï¼š** é•œåƒæˆåŠŸæ¨é€åˆ° `ghcr.io`

---

## ğŸ“Š å®Œæ•´æµç¨‹

```
ä½ æ¨é€ä»£ç 
    â†“
CI/CD å¼€å§‹è¿è¡Œ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 1: ç™»å½• Docker Hub     â”‚ â† å¯é€‰ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 2: ç™»å½• GitHub         â”‚ â† å¿…éœ€ï¼
â”‚ Container Registry           â”‚
â”‚ - registry: ghcr.io          â”‚
â”‚ - username: ä½ çš„ç”¨æˆ·å       â”‚
â”‚ - password: GITHUB_TOKEN     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 3: æ„å»ºé•œåƒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 4: æ¨é€é•œåƒ             â”‚
â”‚ - æ¨é€åˆ° ghcr.io             â”‚
â”‚ - é•œåƒ: ghcr.io/ç”¨æˆ·å/ä»“åº“åâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
âœ… é•œåƒæ¨é€æˆåŠŸ
```

---

## ğŸ” å¯¹æ¯”ï¼šDocker Hub vs GitHub Container Registry

### Docker Hub ç™»å½•

```yaml
- name: Log in to Docker Hub
  uses: docker/login-action@v3
  with:
    username: ${{ secrets.DOCKER_USERNAME }}  # éœ€è¦æ‰‹åŠ¨é…ç½®
    password: ${{ secrets.DOCKER_PASSWORD }}    # éœ€è¦æ‰‹åŠ¨é…ç½®
```

**ç‰¹ç‚¹ï¼š**
- âŒ éœ€è¦æ‰‹åŠ¨é…ç½®å¯†é’¥
- âŒ éœ€è¦ Docker Hub è´¦å·
- âŒ éœ€è¦åˆ›å»ºè®¿é—®ä»¤ç‰Œ

---

### GitHub Container Registry ç™»å½•

```yaml
- name: Log in to GitHub Container Registry
  uses: docker/login-action@v3
  with:
    registry: ghcr.io
    username: ${{ github.actor }}              # è‡ªåŠ¨è·å–
    password: ${{ secrets.GITHUB_TOKEN }}      # è‡ªåŠ¨æä¾›
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ— éœ€æ‰‹åŠ¨é…ç½®
- âœ… ä½¿ç”¨ GitHub è´¦å·
- âœ… GitHub è‡ªåŠ¨æä¾› Token

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¯ä»¥åˆ é™¤è¿™ä¸ªç™»å½•æ­¥éª¤å—ï¼Ÿ

**A:** ä¸å¯ä»¥ï¼å¦‚æœæ²¡æœ‰ç™»å½•æ­¥éª¤ï¼Œæ— æ³•æ¨é€é•œåƒåˆ° GitHub Container Registryã€‚

**å°±åƒï¼š** æ²¡æœ‰ç™»å½•ï¼Œæ— æ³•ä¸Šä¼ æ–‡ä»¶åˆ°ç½‘ç›˜

---

### Q2: GITHUB_TOKEN éœ€è¦æ‰‹åŠ¨é…ç½®å—ï¼Ÿ

**A:** ä¸éœ€è¦ï¼GitHub è‡ªåŠ¨æä¾›ï¼Œæ¯ä¸ª CI/CD è¿è¡Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚

---

### Q3: ä¸ºä»€ä¹ˆ PR æ—¶ä¸ç™»å½•ï¼Ÿ

**A:** å› ä¸º PR æ—¶ä¸æ¨é€é•œåƒï¼ˆ`push: false`ï¼‰ï¼Œæ‰€ä»¥ä¸éœ€è¦ç™»å½•ã€‚

**å°±åƒï¼š** è‰ç¨¿ä¸éœ€è¦ä¸Šä¼ ï¼Œæ‰€ä»¥ä¸éœ€è¦ç™»å½•

---

### Q4: å¯ä»¥åªæ¨é€åˆ° Docker Hubï¼Œä¸æ¨é€åˆ° GitHub Container Registry å—ï¼Ÿ

**A:** å¯ä»¥ï¼åˆ é™¤ GitHub Container Registry ç™»å½•æ­¥éª¤ï¼Œåªä¿ç•™ Docker Hub ç™»å½•ã€‚

---

### Q5: é•œåƒä¼šæ¨é€åˆ°å“ªé‡Œï¼Ÿ

**A:** æ¨é€åˆ° `ghcr.io/<ä½ çš„ç”¨æˆ·å>/<ä»“åº“å>`

**ä¾‹å¦‚ï¼š**
- ç”¨æˆ·åï¼š`your-username`
- ä»“åº“åï¼š`neurobreak`
- é•œåƒåœ°å€ï¼š`ghcr.io/your-username/neurobreak:latest`

---

## ğŸ¯ æ€»ç»“

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ­¥éª¤ï¼Ÿ

1. âœ… **èº«ä»½éªŒè¯** - è¯æ˜ä½ æ˜¯ä»“åº“çš„æ‰€æœ‰è€…
2. âœ… **è·å¾—æ¨é€æƒé™** - å…è®¸æ¨é€é•œåƒ
3. âœ… **è‡ªåŠ¨é…ç½®** - ä½¿ç”¨ GitHub è‡ªåŠ¨æä¾›çš„ Token
4. âœ… **æ— éœ€æ‰‹åŠ¨æ“ä½œ** - å®Œå…¨è‡ªåŠ¨åŒ–

### å…³é”®ä¼˜åŠ¿

- âœ… **æ— éœ€æ‰‹åŠ¨é…ç½®** - GitHub è‡ªåŠ¨æä¾› Token
- âœ… **å®‰å…¨å¯é ** - ä½¿ç”¨ GitHub å®˜æ–¹è®¤è¯
- âœ… **å®Œå…¨è‡ªåŠ¨åŒ–** - æ¨é€ä»£ç åè‡ªåŠ¨æ¨é€é•œåƒ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `docs/Dockeré•œåƒè‡ªåŠ¨æ¨é€é…ç½®.md` - å®Œæ•´é…ç½®æŒ‡å—
- `.github/workflows/ci.yml` - CI/CD é…ç½®æ–‡ä»¶

---

**è¿™ä¸ªç™»å½•æ­¥éª¤æ˜¯å¿…éœ€çš„ï¼Œç”¨äºéªŒè¯èº«ä»½å¹¶è·å¾—æ¨é€é•œåƒçš„æƒé™ï¼** ğŸ”


# CI/CD å®ç°æŒ‡å—

åŸºäº `.github/workflows/ci.yml` çš„å®Œæ•´å®ç°æŒ‡å—ã€‚

---

## ğŸ“‹ ç›®å½•

1. [é…ç½®æ¦‚è§ˆ](#é…ç½®æ¦‚è§ˆ)
2. [å‰ç½®å‡†å¤‡](#å‰ç½®å‡†å¤‡)
3. [CI/CD å·¥ä½œæµè¯¦è§£](#cicd-å·¥ä½œæµè¯¦è§£)
4. [é…ç½®æ­¥éª¤](#é…ç½®æ­¥éª¤)
5. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
6. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸ“Š é…ç½®æ¦‚è§ˆ

### å·¥ä½œæµåç§°
```yaml
name: CI/CD Pipeline
```

### è§¦å‘æ¡ä»¶
- **æ¨é€ä»£ç **åˆ° `main`ã€`master` æˆ– `develop` åˆ†æ”¯
- **åˆ›å»º Pull Request** åˆ°ä¸Šè¿°åˆ†æ”¯

### ä»»åŠ¡åˆ—è¡¨
1. **ä»£ç è´¨é‡æ£€æŸ¥** (`lint-and-format`)
2. **è¿è¡Œæµ‹è¯•** (`test`)
3. **å‰ç«¯æ£€æŸ¥** (`frontend-check`)
4. **Docker æ„å»ºä¸æ¨é€** (`docker-build`)

---

## ğŸ”§ å‰ç½®å‡†å¤‡

### 1. å®‰è£…ä¾èµ–

#### Python ä¾èµ–
```bash
pip install -r requirements.txt
```

**åŒ…å«ï¼š**
- pytest (8.3.3) - æµ‹è¯•æ¡†æ¶
- pytest-cov (5.0.0) - è¦†ç›–ç‡å·¥å…·
- pytest-mock (3.14.0) - Mock å·¥å…·
- ruff (0.6.9) - ä»£ç æ£€æŸ¥
- black (24.10.0) - ä»£ç æ ¼å¼åŒ–
- isort (5.13.2) - å¯¼å…¥æ’åº
- httpx (0.27.2) - HTTP å®¢æˆ·ç«¯

#### å‰ç«¯ä¾èµ–
```bash
cd frontend
npm install
```

### 2. é…ç½® Docker Hubï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³è‡ªåŠ¨æ¨é€é•œåƒåˆ° Docker Hubï¼š

1. **æ³¨å†Œ Docker Hub è´¦å·**
   - è®¿é—® https://hub.docker.com
   - æ³¨å†Œå¹¶ç™»å½•

2. **åˆ›å»ºè®¿é—®ä»¤ç‰Œ**
   - ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Account Settings
   - é€‰æ‹© Security â†’ New Access Token
   - åˆ›å»ºä»¤ç‰Œå¹¶å¤åˆ¶ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

3. **åœ¨ GitHub æ·»åŠ å¯†é’¥**
   - æ‰“å¼€ä½ çš„ GitHub ä»“åº“
   - Settings â†’ Secrets and variables â†’ Actions
   - ç‚¹å‡» "New repository secret"
   - æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š
     - `DOCKER_USERNAME` - ä½ çš„ Docker Hub ç”¨æˆ·å
     - `DOCKER_PASSWORD` - ä½ çš„ Docker Hub è®¿é—®ä»¤ç‰Œ

---

## ğŸ”„ CI/CD å·¥ä½œæµè¯¦è§£

### ä»»åŠ¡ 1ï¼šä»£ç è´¨é‡æ£€æŸ¥

**ä»»åŠ¡åç§°ï¼š** `lint-and-format`  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu Latest  
**å¹¶è¡Œè¿è¡Œï¼š** æ˜¯ï¼ˆä¸å…¶ä»–ä»»åŠ¡å¹¶è¡Œï¼‰

#### æ­¥éª¤è¯¦è§£

##### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 
```yaml
- name: Checkout code
  uses: actions/checkout@v4
```
ä» GitHub ä»“åº“ä¸‹è½½ä»£ç åˆ° CI ç¯å¢ƒã€‚

##### æ­¥éª¤ 2ï¼šè®¾ç½® Python ç¯å¢ƒ
```yaml
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.10'
    cache: 'pip'
```
- å®‰è£… Python 3.10
- å¯ç”¨ pip ç¼“å­˜åŠ é€Ÿ

##### æ­¥éª¤ 3ï¼šå®‰è£…ä»£ç æ£€æŸ¥å·¥å…·
```yaml
- name: Install linting tools
  run: |
    python -m pip install --upgrade pip
    pip install ruff black isort
```
å®‰è£…ä¸‰ä¸ªä»£ç è´¨é‡å·¥å…·ã€‚

##### æ­¥éª¤ 4-6ï¼šè¿è¡Œæ£€æŸ¥
```yaml
- name: Run ruff (lint)
  run: ruff check .

- name: Check black formatting
  run: black --check .

- name: Check isort import sorting
  run: isort --check-only .
```

**æ£€æŸ¥å†…å®¹ï¼š**
- **ruff** - ä»£ç è¯­æ³•å’Œé£æ ¼æ£€æŸ¥
- **black** - ä»£ç æ ¼å¼æ£€æŸ¥
- **isort** - å¯¼å…¥è¯­å¥æ’åºæ£€æŸ¥

**å¦‚æœå¤±è´¥ï¼š**
- âŒ æ•´ä¸ª CI/CD æµç¨‹åœæ­¢
- éœ€è¦ä¿®å¤ä»£ç åé‡æ–°æäº¤

---

### ä»»åŠ¡ 2ï¼šè¿è¡Œæµ‹è¯•

**ä»»åŠ¡åç§°ï¼š** `test`  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu Latest  
**å¹¶è¡Œè¿è¡Œï¼š** æ˜¯ï¼ˆä¸å…¶ä»–ä»»åŠ¡å¹¶è¡Œï¼‰

#### æ­¥éª¤è¯¦è§£

##### æ­¥éª¤ 1-2ï¼šå‡†å¤‡ç¯å¢ƒ
åŒä»»åŠ¡ 1ï¼Œä¸‹è½½ä»£ç å¹¶è®¾ç½® Python ç¯å¢ƒã€‚

##### æ­¥éª¤ 3ï¼šå®‰è£…ä¾èµ–
```yaml
- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt
```
å®‰è£…é¡¹ç›®æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ pytestã€torch ç­‰ï¼‰ã€‚

##### æ­¥éª¤ 4ï¼šè¿è¡Œæµ‹è¯• â­ å…³é”®
```yaml
- name: Run pytest
  run: |
    pytest tests/ -v --cov=engine --cov-report=xml --cov-report=term
  env:
    SKIP_MODEL_LOAD: "true"
```

**å‘½ä»¤è¯´æ˜ï¼š**
- `pytest tests/` - è¿è¡Œæ‰€æœ‰æµ‹è¯•
- `-v` - æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- `--cov=engine` - æµ‹è¯• `engine` ç›®å½•çš„è¦†ç›–ç‡
- `--cov-report=xml` - ç”Ÿæˆ XML è¦†ç›–ç‡æŠ¥å‘Š
- `--cov-report=term` - åœ¨ç»ˆç«¯æ˜¾ç¤ºè¦†ç›–ç‡

**ç¯å¢ƒå˜é‡ï¼š** `SKIP_MODEL_LOAD: "true"`
- â­ **å…³é”®é…ç½®ï¼**
- å‘Šè¯‰æµ‹è¯•ç¯å¢ƒä¸è¦åŠ è½½çœŸå®æ¨¡å‹
- ä½¿ç”¨ Mockï¼ˆæ¨¡æ‹Ÿå¯¹è±¡ï¼‰æ›¿ä»£çœŸå®æ¨¡å‹
- è®©æµ‹è¯•å¯ä»¥åœ¨æ²¡æœ‰æ¨¡å‹çš„æƒ…å†µä¸‹è¿è¡Œ

##### æ­¥éª¤ 5ï¼šä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š
```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v4
  if: always()
  with:
    file: ./coverage.xml
    flags: unittests
```
ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Šåˆ° Codecovï¼ˆå³ä½¿æµ‹è¯•å¤±è´¥ä¹Ÿä¸Šä¼ ï¼‰ã€‚

---

### ä»»åŠ¡ 3ï¼šå‰ç«¯æ£€æŸ¥

**ä»»åŠ¡åç§°ï¼š** `frontend-check`  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu Latest  
**å¹¶è¡Œè¿è¡Œï¼š** æ˜¯ï¼ˆä¸å…¶ä»–ä»»åŠ¡å¹¶è¡Œï¼‰

#### æ­¥éª¤è¯¦è§£

##### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 
åŒä»»åŠ¡ 1ã€‚

##### æ­¥éª¤ 2ï¼šè®¾ç½® Node.js ç¯å¢ƒ
```yaml
- name: Set up Node.js
  uses: actions/setup-node@v4
  with:
    node-version: '18'
    cache: 'npm'
    cache-dependency-path: frontend/package-lock.json
```
- å®‰è£… Node.js 18
- å¯ç”¨ npm ç¼“å­˜

##### æ­¥éª¤ 3ï¼šå®‰è£…å‰ç«¯ä¾èµ–
```yaml
- name: Install dependencies
  working-directory: ./frontend
  run: npm ci
```
åœ¨ `frontend` ç›®å½•ä¸‹å®‰è£…ä¾èµ–ã€‚

##### æ­¥éª¤ 4ï¼šè¿è¡Œ ESLint
```yaml
- name: Run ESLint
  working-directory: ./frontend
  run: npm run lint
```
æ£€æŸ¥å‰ç«¯ä»£ç è´¨é‡ã€‚

##### æ­¥éª¤ 5ï¼šæ„å»ºå‰ç«¯
```yaml
- name: Build frontend
  working-directory: ./frontend
  run: npm run build
```
æ‰“åŒ…å‰ç«¯ä»£ç ï¼ŒéªŒè¯èƒ½å¦æ­£å¸¸æ„å»ºã€‚

---

### ä»»åŠ¡ 4ï¼šDocker æ„å»ºä¸æ¨é€

**ä»»åŠ¡åç§°ï¼š** `docker-build`  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu Latest  
**å¹¶è¡Œè¿è¡Œï¼š** å¦ï¼ˆä¾èµ–å‰é¢ä¸‰ä¸ªä»»åŠ¡ï¼‰

#### ä¾èµ–å…³ç³»
```yaml
needs: [lint-and-format, test, frontend-check]
```
åªæœ‰å‰é¢ä¸‰ä¸ªä»»åŠ¡éƒ½é€šè¿‡ï¼Œæ‰ä¼šè¿è¡Œè¿™ä¸ªä»»åŠ¡ã€‚

#### æ­¥éª¤è¯¦è§£

##### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 
åŒä»»åŠ¡ 1ã€‚

##### æ­¥éª¤ 2ï¼šè®¾ç½® Docker Buildx
```yaml
- name: Set up Docker Buildx
  uses: docker/setup-buildx-action@v3
```
è®¾ç½® Docker Buildxï¼ˆå¢å¼ºçš„æ„å»ºå·¥å…·ï¼‰ã€‚

##### æ­¥éª¤ 3ï¼šç™»å½• Docker Hub
```yaml
- name: Log in to Docker Hub
  if: github.event_name != 'pull_request'
  uses: docker/login-action@v3
  with:
    username: ${{ secrets.DOCKER_USERNAME }}
    password: ${{ secrets.DOCKER_PASSWORD }}
```

**æ¡ä»¶ï¼š** `if: github.event_name != 'pull_request'`
- âœ… Push åˆ°ä¸»åˆ†æ”¯ â†’ ç™»å½•å¹¶æ¨é€
- âŒ Pull Request â†’ ä¸ç™»å½•ï¼ˆåªæ„å»ºéªŒè¯ï¼‰

**éœ€è¦é…ç½®ï¼š**
- `DOCKER_USERNAME` - Docker Hub ç”¨æˆ·å
- `DOCKER_PASSWORD` - Docker Hub è®¿é—®ä»¤ç‰Œ

##### æ­¥éª¤ 4ï¼šæå–å…ƒæ•°æ®
```yaml
- name: Extract metadata
  id: meta
  uses: docker/metadata-action@v5
  with:
    images: |
      ${{ secrets.DOCKER_USERNAME }}/neurobreak
    tags: |
      type=ref,event=branch
      type=ref,event=pr
      type=semver,pattern={{version}}
      type=semver,pattern={{major}}.{{minor}}
      type=sha,prefix={{branch}}-
      type=raw,value=latest,enable={{is_default_branch}}
```

**ä½œç”¨ï¼š** è‡ªåŠ¨ç”Ÿæˆé•œåƒæ ‡ç­¾

**æ ‡ç­¾æ ¼å¼ï¼š**
- `latest` - ä¸»åˆ†æ”¯æœ€æ–°ç‰ˆæœ¬
- `<branch>` - åˆ†æ”¯å
- `<branch>-<sha>` - åˆ†æ”¯åå’Œ commit SHA
- `<version>` - Git æ ‡ç­¾ï¼ˆå¦‚ v1.0.0ï¼‰
- `<major>.<minor>` - ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬

##### æ­¥éª¤ 5ï¼šæ„å»ºå¹¶æ¨é€é•œåƒ
```yaml
- name: Build and push Docker image
  uses: docker/build-push-action@v5
  with:
    context: .
    file: ./docker/Dockerfile
    push: ${{ github.event_name != 'pull_request' }}
    tags: ${{ steps.meta.outputs.tags }}
    labels: ${{ steps.meta.outputs.labels }}
    cache-from: type=gha
    cache-to: type=gha,mode=max
```

**å…³é”®é…ç½®ï¼š**
- `push: ${{ github.event_name != 'pull_request' }}`
  - Push åˆ°ä¸»åˆ†æ”¯ â†’ `push: true`ï¼ˆæ¨é€ï¼‰
  - Pull Request â†’ `push: false`ï¼ˆåªæ„å»ºï¼‰
- `cache-from: type=gha` - ä½¿ç”¨ GitHub Actions ç¼“å­˜
- `cache-to: type=gha,mode=max` - ä¿å­˜æ„å»ºç¼“å­˜

---

## ğŸš€ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šç¡®ä¿ä»£ç å·²æäº¤

```bash
# æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
git status

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤ä»£ç 
git commit -m "é…ç½® CI/CD"

# æ¨é€åˆ° GitHub
git push origin main
```

### æ­¥éª¤ 2ï¼šé…ç½® Docker Hubï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³è‡ªåŠ¨æ¨é€é•œåƒï¼š

1. æ³¨å†Œ Docker Hub è´¦å·
2. åˆ›å»ºè®¿é—®ä»¤ç‰Œ
3. åœ¨ GitHub æ·»åŠ å¯†é’¥ï¼š
   - `DOCKER_USERNAME`
   - `DOCKER_PASSWORD`

### æ­¥éª¤ 3ï¼šéªŒè¯ CI/CD

1. æ‰“å¼€ GitHub ä»“åº“
2. ç‚¹å‡» **"Actions"** æ ‡ç­¾
3. æŸ¥çœ‹è¿è¡Œè®°å½•

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åœºæ™¯ 1ï¼šæ¨é€ä»£ç åˆ°ä¸»åˆ†æ”¯

```bash
git push origin main
```

**CI/CD ä¼šï¼š**
1. âœ… è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
2. âœ… è¿è¡Œæµ‹è¯•ï¼ˆä½¿ç”¨ Mockï¼‰
3. âœ… æ£€æŸ¥å‰ç«¯
4. âœ… æ„å»º Docker é•œåƒ
5. âœ… æ¨é€åˆ° Docker Hubï¼ˆå¦‚æœé…ç½®äº†ï¼‰

**é•œåƒæ ‡ç­¾ï¼š**
- `latest`
- `main`
- `main-<commit-sha>`

### åœºæ™¯ 2ï¼šåˆ›å»º Pull Request

```bash
git checkout -b feature/new-feature
git push origin feature/new-feature
# åœ¨ GitHub åˆ›å»º PR
```

**CI/CD ä¼šï¼š**
1. âœ… è¿è¡Œæ‰€æœ‰æ£€æŸ¥
2. âœ… æ„å»ºé•œåƒï¼ˆéªŒè¯èƒ½å¦æ„å»ºï¼‰
3. âŒ ä¸æ¨é€é•œåƒï¼ˆPR ä»£ç å¯èƒ½ä¸å®Œæ•´ï¼‰

### åœºæ™¯ 3ï¼šæ‰“æ ‡ç­¾å‘å¸ƒ

```bash
git tag v1.0.0
git push origin v1.0.0
```

**CI/CD ä¼šï¼š**
1. âœ… è¿è¡Œæ‰€æœ‰æ£€æŸ¥
2. âœ… æ„å»ºé•œåƒ
3. âœ… æ¨é€åˆ° Docker Hub
4. âœ… æ ‡ç­¾ï¼š`v1.0.0`, `1.0.0`, `1.0`, `latest`

---

## ğŸ” æŸ¥çœ‹ç»“æœ

### åœ¨ GitHub ä¸ŠæŸ¥çœ‹

1. **æ‰“å¼€ä»“åº“**
   - è®¿é—®ä½ çš„ GitHub ä»“åº“

2. **ç‚¹å‡» Actions æ ‡ç­¾**
   - æŸ¥çœ‹æ‰€æœ‰ CI/CD è¿è¡Œè®°å½•

3. **æŸ¥çœ‹è¿è¡Œè¯¦æƒ…**
   - ç‚¹å‡»æŸä¸ªè¿è¡Œè®°å½•
   - æŸ¥çœ‹æ¯ä¸ªä»»åŠ¡çš„è¯¦ç»†æ—¥å¿—

**çŠ¶æ€æ ‡è¯†ï¼š**
- âœ… ç»¿è‰² = é€šè¿‡
- âŒ çº¢è‰² = å¤±è´¥
- ğŸŸ¡ é»„è‰² = è¿›è¡Œä¸­

### æŸ¥çœ‹ Docker é•œåƒ

#### Docker Hub
1. è®¿é—® https://hub.docker.com
2. ç™»å½•åæŸ¥çœ‹ä½ çš„ä»“åº“
3. æ‰¾åˆ° `neurobreak` ä»“åº“

#### æ‹‰å–é•œåƒ
```bash
docker pull <ä½ çš„ç”¨æˆ·å>/neurobreak:latest
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šä»£ç è´¨é‡æ£€æŸ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** ruff/black/isort æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
```bash
# è‡ªåŠ¨ä¿®å¤
ruff check --fix .
black .
isort .

# é‡æ–°æäº¤
git add .
git commit -m "ä¿®å¤ä»£ç æ ¼å¼"
git push
```

### é—®é¢˜ 2ï¼šæµ‹è¯•å¤±è´¥

**ç—‡çŠ¶ï¼š** pytest æµ‹è¯•å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. æŸ¥çœ‹ CI/CD æ—¥å¿—ï¼Œæ‰¾åˆ°å¤±è´¥çš„æµ‹è¯•
2. æœ¬åœ°è¿è¡Œæµ‹è¯•ï¼š
   ```bash
   SKIP_MODEL_LOAD=true pytest tests/ -v
   ```
3. ä¿®å¤é—®é¢˜åé‡æ–°æäº¤

### é—®é¢˜ 3ï¼šå‰ç«¯æ£€æŸ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** ESLint æˆ–æ„å»ºå¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
```bash
cd frontend
npm run lint  # æŸ¥çœ‹é”™è¯¯
npm run build  # æŸ¥çœ‹æ„å»ºé”™è¯¯
```

### é—®é¢˜ 4ï¼šDocker æ„å»ºå¤±è´¥

**ç—‡çŠ¶ï¼š** Docker é•œåƒæ„å»ºå¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. æŸ¥çœ‹æ„å»ºæ—¥å¿—
2. æ£€æŸ¥ `docker/Dockerfile` æ˜¯å¦æ­£ç¡®
3. æœ¬åœ°æµ‹è¯•æ„å»ºï¼š
   ```bash
   docker build -t neurobreak:test -f docker/Dockerfile .
   ```

### é—®é¢˜ 5ï¼šDocker æ¨é€å¤±è´¥

**ç—‡çŠ¶ï¼š** é•œåƒæ„å»ºæˆåŠŸä½†æ¨é€å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- Docker Hub å¯†é’¥æœªé…ç½®
- å¯†é’¥é…ç½®é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ GitHub Secrets æ˜¯å¦æ­£ç¡®é…ç½®
2. éªŒè¯ Docker Hub è®¿é—®ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ
3. é‡æ–°åˆ›å»ºè®¿é—®ä»¤ç‰Œ

### é—®é¢˜ 6ï¼šæµ‹è¯•æ‰¾ä¸åˆ°æ¨¡å‹

**ç—‡çŠ¶ï¼š** æµ‹è¯•æŠ¥é”™æ‰¾ä¸åˆ°æ¨¡å‹

**è§£å†³æ–¹æ³•ï¼š**
- âœ… è¿™æ˜¯æ­£å¸¸çš„ï¼CI/CD ä½¿ç”¨ Mockï¼Œä¸åŠ è½½çœŸå®æ¨¡å‹
- âœ… ç¡®ä¿ `SKIP_MODEL_LOAD: "true"` å·²è®¾ç½®
- âœ… æ£€æŸ¥ `tests/conftest.py` ä¸­çš„ Mock é…ç½®

---

## ğŸ“Š å·¥ä½œæµç¨‹å›¾

```
ä½ æ¨é€ä»£ç  (git push)
    â†“
GitHub æ”¶åˆ°ä»£ç 
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¹¶è¡Œè¿è¡Œï¼ˆåŒæ—¶æ‰§è¡Œï¼‰              â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ â”‚ ä»»åŠ¡1: ä»£ç    â”‚                â”‚
â”‚ â”‚ è´¨é‡æ£€æŸ¥      â”‚                â”‚
â”‚ â”‚ ~2 åˆ†é’Ÿ      â”‚                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ â”‚ ä»»åŠ¡2: è¿è¡Œ   â”‚                â”‚
â”‚ â”‚ æµ‹è¯•          â”‚                â”‚
â”‚ â”‚ ~3 åˆ†é’Ÿ      â”‚                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ â”‚ ä»»åŠ¡3: å‰ç«¯   â”‚                â”‚
â”‚ â”‚ æ£€æŸ¥          â”‚                â”‚
â”‚ â”‚ ~2 åˆ†é’Ÿ      â”‚                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (éƒ½é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡4: Docker æ„å»º               â”‚
â”‚ - æ„å»ºé•œåƒ                       â”‚
â”‚ - æ¨é€åˆ° Docker Hub              â”‚
â”‚ ~5 åˆ†é’Ÿ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼                â”‚
â”‚ ä»£ç å¯ä»¥åˆå¹¶                     â”‚
â”‚ é•œåƒå·²æ¨é€                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ€»æ—¶é—´ï¼š** çº¦ 7-8 åˆ†é’Ÿï¼ˆå¹¶è¡Œè¿è¡Œï¼‰

---

## âœ… æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä½¿ç”¨å‰ï¼Œç¡®ä¿ï¼š

- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] `requirements.txt` åŒ…å«æ‰€æœ‰ä¾èµ–
- [ ] `tests/` ç›®å½•æœ‰æµ‹è¯•æ–‡ä»¶
- [ ] `docker/Dockerfile` å­˜åœ¨ä¸”æ­£ç¡®
- [ ] Docker Hub å¯†é’¥å·²é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- [ ] æœ¬åœ°å¯ä»¥è¿è¡Œ `pytest`ï¼ˆéªŒè¯æµ‹è¯•ï¼‰

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æäº¤å‰æœ¬åœ°æ£€æŸ¥

```bash
# ä»£ç è´¨é‡æ£€æŸ¥
ruff check .
black --check .
isort --check-only .

# è¿è¡Œæµ‹è¯•
SKIP_MODEL_LOAD=true pytest

# å‰ç«¯æ£€æŸ¥
cd frontend && npm run lint && npm run build
```

### 2. ä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯

```bash
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git commit -m "fix: ä¿®å¤ bug"
git commit -m "docs: æ›´æ–°æ–‡æ¡£"
```

### 3. å®šæœŸæŸ¥çœ‹ CI/CD ç»“æœ

- åŠæ—¶å‘ç°é—®é¢˜
- ä¿æŒä»£ç è´¨é‡
- ç¡®ä¿é•œåƒæ­£å¸¸æ¨é€

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `.github/workflows/ci.yml` - CI/CD é…ç½®æ–‡ä»¶
- `docs/CI_CDä»£ç è¯¦è§£.md` - ä»£ç è¯¦ç»†è§£é‡Š
- `docs/æœ¬åœ°æ¨¡å‹_CI_CDå®ç°æŒ‡å—.md` - æœ¬åœ°æ¨¡å‹é…ç½®
- `docs/Dockeré•œåƒè‡ªåŠ¨æ¨é€é…ç½®.md` - Docker é…ç½®
- `docs/pytestå®‰è£…æŒ‡å—.md` - pytest å®‰è£…

---

## ğŸ“ æ€»ç»“

### CI/CD å·¥ä½œæµåŒ…å«ï¼š

1. âœ… **ä»£ç è´¨é‡æ£€æŸ¥** - ruff, black, isort
2. âœ… **è¿è¡Œæµ‹è¯•** - pytest + Mockï¼ˆæ”¯æŒæœ¬åœ°æ¨¡å‹ï¼‰
3. âœ… **å‰ç«¯æ£€æŸ¥** - ESLint + æ„å»º
4. âœ… **Docker æ„å»º** - æ„å»ºå¹¶æ¨é€é•œåƒ

### å…³é”®ç‰¹æ€§ï¼š

- âœ… **æ”¯æŒæœ¬åœ°æ¨¡å‹** - ä½¿ç”¨ Mockï¼Œä¸åŠ è½½çœŸå®æ¨¡å‹
- âœ… **å¹¶è¡Œè¿è¡Œ** - æé«˜é€Ÿåº¦
- âœ… **è‡ªåŠ¨æ¨é€** - æ¨é€åˆ° Docker Hub
- âœ… **æ™ºèƒ½æ ‡ç­¾** - è‡ªåŠ¨ç”Ÿæˆé•œåƒæ ‡ç­¾

### ä½¿ç”¨æµç¨‹ï¼š

1. æ¨é€ä»£ç  â†’ è‡ªåŠ¨è§¦å‘ CI/CD
2. æŸ¥çœ‹ç»“æœ â†’ GitHub Actions
3. æ‹‰å–é•œåƒ â†’ Docker Hub

**ç°åœ¨ä½ çš„ CI/CD å·²ç»å®Œå…¨é…ç½®å¥½äº†ï¼** ğŸ‰

---

**å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’æŸ¥éƒ¨åˆ†æˆ–ç›¸å…³æ–‡æ¡£ã€‚**


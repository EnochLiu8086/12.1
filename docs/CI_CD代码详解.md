# CI/CD ä»£ç è¯¦è§£

æœ¬æ–‡æ¡£è¯¦ç»†è§£é‡Šä½ çš„ CI/CD é…ç½®æ–‡ä»¶ `.github/workflows/ci.yml`ã€‚

---

## ğŸ“‹ æ–‡ä»¶ç»“æ„

```yaml
name: CI/CD Pipeline          # å·¥ä½œæµåç§°

on:                           # è§¦å‘æ¡ä»¶
  push: ...                   # æ¨é€ä»£ç æ—¶è§¦å‘
  pull_request: ...           # åˆ›å»º PR æ—¶è§¦å‘

jobs:                         # ä»»åŠ¡åˆ—è¡¨
  lint-and-format: ...       # ä»»åŠ¡1: ä»£ç è´¨é‡æ£€æŸ¥
  test: ...                   # ä»»åŠ¡2: è¿è¡Œæµ‹è¯•
  frontend-check: ...         # ä»»åŠ¡3: å‰ç«¯æ£€æŸ¥
  docker-build: ...           # ä»»åŠ¡4: Docker æ„å»º
```

---

## ğŸ¯ ç¬¬ä¸€éƒ¨åˆ†ï¼šè§¦å‘æ¡ä»¶

```yaml
on:
  push:
    branches: [ main, master, develop ]
  pull_request:
    branches: [ main, master, develop ]
```

### è§£é‡Š

**ä»€ä¹ˆæ—¶å€™ä¼šè¿è¡Œ CI/CDï¼Ÿ**

1. **æ¨é€ä»£ç ** (`push`)
   - å½“ä½ æ¨é€ä»£ç åˆ° `main`ã€`master` æˆ– `develop` åˆ†æ”¯æ—¶
   - ä¾‹å¦‚ï¼š`git push origin main`

2. **åˆ›å»º Pull Request** (`pull_request`)
   - å½“ä½ åˆ›å»º PR åˆ° `main`ã€`master` æˆ– `develop` åˆ†æ”¯æ—¶
   - ä¾‹å¦‚ï¼šä» `feature` åˆ†æ”¯åˆ›å»º PR åˆ° `main`

**å°±åƒï¼š** ä½ æäº¤ä½œä¸šæ—¶ï¼Œè‡ªåŠ¨è§¦å‘æ£€æŸ¥ã€‚

---

## ğŸ” ç¬¬äºŒéƒ¨åˆ†ï¼šä»»åŠ¡ 1 - ä»£ç è´¨é‡æ£€æŸ¥

```yaml
lint-and-format:
  name: Code Quality Check
  runs-on: ubuntu-latest
```

### ä»»åŠ¡è¯´æ˜

**ä»»åŠ¡åç§°ï¼š** `lint-and-format`  
**æ˜¾ç¤ºåç§°ï¼š** Code Quality Check  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu æœ€æ–°ç‰ˆï¼ˆGitHub æä¾›çš„è™šæ‹Ÿæœºï¼‰

### æ­¥éª¤è¯¦è§£

#### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 

```yaml
- name: Checkout code
  uses: actions/checkout@v4
```

**ä½œç”¨ï¼š** ä» GitHub ä»“åº“ä¸‹è½½ä»£ç åˆ°è™šæ‹Ÿæœº

**å°±åƒï¼š** æŠŠä½œä¸šæœ¬ä»ä¹¦åŒ…é‡Œæ‹¿å‡ºæ¥

---

#### æ­¥éª¤ 2ï¼šè®¾ç½® Python ç¯å¢ƒ

```yaml
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.10'
    cache: 'pip'
```

**ä½œç”¨ï¼š**
- å®‰è£… Python 3.10
- å¯ç”¨ pip ç¼“å­˜ï¼ˆåŠ é€Ÿä¾èµ–å®‰è£…ï¼‰

**å°±åƒï¼š** å‡†å¤‡ Python è¿è¡Œç¯å¢ƒ

---

#### æ­¥éª¤ 3ï¼šå®‰è£…ä»£ç æ£€æŸ¥å·¥å…·

```yaml
- name: Install linting tools
  run: |
    python -m pip install --upgrade pip
    pip install ruff black isort
```

**ä½œç”¨ï¼š**
- å‡çº§ pip
- å®‰è£…ä¸‰ä¸ªå·¥å…·ï¼š
  - `ruff` - ä»£ç æ£€æŸ¥å·¥å…·
  - `black` - ä»£ç æ ¼å¼åŒ–å·¥å…·
  - `isort` - å¯¼å…¥æ’åºå·¥å…·

**å°±åƒï¼š** å‡†å¤‡æ£€æŸ¥å·¥å…·

---

#### æ­¥éª¤ 4-6ï¼šè¿è¡Œæ£€æŸ¥

```yaml
- name: Run ruff (lint)
  run: ruff check .

- name: Check black formatting
  run: black --check .

- name: Check isort import sorting
  run: isort --check-only .
```

**ä½œç”¨ï¼š**

1. **ruff check** - æ£€æŸ¥ä»£ç è¯­æ³•å’Œé£æ ¼
   - å‘ç°é”™è¯¯ï¼šâŒ åœæ­¢æµç¨‹
   - æ²¡æœ‰é—®é¢˜ï¼šâœ… ç»§ç»­

2. **black --check** - æ£€æŸ¥ä»£ç æ ¼å¼
   - æ ¼å¼ä¸å¯¹ï¼šâŒ åœæ­¢æµç¨‹
   - æ ¼å¼æ­£ç¡®ï¼šâœ… ç»§ç»­

3. **isort --check-only** - æ£€æŸ¥å¯¼å…¥æ’åº
   - æ’åºä¸å¯¹ï¼šâŒ åœæ­¢æµç¨‹
   - æ’åºæ­£ç¡®ï¼šâœ… ç»§ç»­

**å°±åƒï¼š** è€å¸ˆæ£€æŸ¥ä½œä¸šæ ¼å¼

---

## ğŸ§ª ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»»åŠ¡ 2 - è¿è¡Œæµ‹è¯•

```yaml
test:
  name: Unit Tests (pytest)
  runs-on: ubuntu-latest
```

### ä»»åŠ¡è¯´æ˜

**ä»»åŠ¡åç§°ï¼š** `test`  
**æ˜¾ç¤ºåç§°ï¼š** Unit Tests (pytest)  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu æœ€æ–°ç‰ˆ

### æ­¥éª¤è¯¦è§£

#### æ­¥éª¤ 1-2ï¼šå‡†å¤‡ç¯å¢ƒ

```yaml
- name: Checkout code
  uses: actions/checkout@v4

- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.10'
    cache: 'pip'
```

**ä½œç”¨ï¼š** åŒä»»åŠ¡1ï¼Œä¸‹è½½ä»£ç å¹¶è®¾ç½® Python ç¯å¢ƒ

---

#### æ­¥éª¤ 3ï¼šå®‰è£…ä¾èµ–

```yaml
- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt
```

**ä½œç”¨ï¼š**
- å‡çº§ pip
- å®‰è£…é¡¹ç›®æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ pytestã€torch ç­‰ï¼‰

**å°±åƒï¼š** å®‰è£…æ‰€æœ‰éœ€è¦çš„å·¥å…·å’Œåº“

---

#### æ­¥éª¤ 4ï¼šè¿è¡Œæµ‹è¯• â­ å…³é”®æ­¥éª¤

```yaml
- name: Run pytest
  run: |
    pytest tests/ -v --cov=engine --cov-report=xml --cov-report=term
  env:
    SKIP_MODEL_LOAD: "true"
```

**è¯¦ç»†è§£é‡Šï¼š**

**å‘½ä»¤ï¼š** `pytest tests/ -v --cov=engine --cov-report=xml --cov-report=term`

- `pytest tests/` - è¿è¡Œ `tests/` ç›®å½•ä¸‹çš„æ‰€æœ‰æµ‹è¯•
- `-v` - æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰
- `--cov=engine` - æµ‹è¯• `engine` ç›®å½•çš„ä»£ç è¦†ç›–ç‡
- `--cov-report=xml` - ç”Ÿæˆ XML æ ¼å¼çš„è¦†ç›–ç‡æŠ¥å‘Š
- `--cov-report=term` - åœ¨ç»ˆç«¯æ˜¾ç¤ºè¦†ç›–ç‡

**ç¯å¢ƒå˜é‡ï¼š** `SKIP_MODEL_LOAD: "true"`

- â­ **å…³é”®é…ç½®ï¼**
- å‘Šè¯‰æµ‹è¯•ç¯å¢ƒï¼šä¸è¦åŠ è½½çœŸå®æ¨¡å‹
- ä½¿ç”¨ Mockï¼ˆæ¨¡æ‹Ÿå¯¹è±¡ï¼‰æ›¿ä»£çœŸå®æ¨¡å‹
- è¿™æ ·æµ‹è¯•å¯ä»¥åœ¨æ²¡æœ‰æ¨¡å‹çš„æƒ…å†µä¸‹è¿è¡Œ

**å°±åƒï¼š** è€ƒè¯•æ—¶ç”¨å‡çš„é“å…·ï¼Œä¸ç”¨çœŸçš„è®¾å¤‡

---

#### æ­¥éª¤ 5ï¼šä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š

```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v4
  if: always()
  with:
    file: ./coverage.xml
    flags: unittests
```

**ä½œç”¨ï¼š**
- ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Šåˆ° Codecovï¼ˆä»£ç è¦†ç›–ç‡æœåŠ¡ï¼‰
- `if: always()` - å³ä½¿æµ‹è¯•å¤±è´¥ä¹Ÿä¸Šä¼ 
- å¯ä»¥åœ¨ Codecov ç½‘ç«™æŸ¥çœ‹è¦†ç›–ç‡

**å°±åƒï¼š** æŠŠè€ƒè¯•æˆç»©å•ä¸Šä¼ åˆ°ç³»ç»Ÿ

---

## ğŸ¨ ç¬¬å››éƒ¨åˆ†ï¼šä»»åŠ¡ 3 - å‰ç«¯æ£€æŸ¥

```yaml
frontend-check:
  name: Frontend Lint & Build
  runs-on: ubuntu-latest
```

### ä»»åŠ¡è¯´æ˜

**ä»»åŠ¡åç§°ï¼š** `frontend-check`  
**æ˜¾ç¤ºåç§°ï¼š** Frontend Lint & Build  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu æœ€æ–°ç‰ˆ

### æ­¥éª¤è¯¦è§£

#### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 

```yaml
- name: Checkout code
  uses: actions/checkout@v4
```

**ä½œç”¨ï¼š** ä¸‹è½½ä»£ç 

---

#### æ­¥éª¤ 2ï¼šè®¾ç½® Node.js ç¯å¢ƒ

```yaml
- name: Set up Node.js
  uses: actions/setup-node@v4
  with:
    node-version: '18'
    cache: 'npm'
    cache-dependency-path: frontend/package-lock.json
```

**ä½œç”¨ï¼š**
- å®‰è£… Node.js 18
- å¯ç”¨ npm ç¼“å­˜ï¼ˆåŠ é€Ÿä¾èµ–å®‰è£…ï¼‰
- ä½¿ç”¨ `frontend/package-lock.json` ä½œä¸ºç¼“å­˜é”®

**å°±åƒï¼š** å‡†å¤‡å‰ç«¯å¼€å‘ç¯å¢ƒ

---

#### æ­¥éª¤ 3ï¼šå®‰è£…å‰ç«¯ä¾èµ–

```yaml
- name: Install dependencies
  working-directory: ./frontend
  run: npm ci
```

**ä½œç”¨ï¼š**
- `working-directory: ./frontend` - åœ¨ `frontend` ç›®å½•ä¸‹æ‰§è¡Œ
- `npm ci` - å®‰è£…ä¾èµ–ï¼ˆæ¯” `npm install` æ›´å¿«ã€æ›´å¯é ï¼‰

**å°±åƒï¼š** å®‰è£…å‰ç«¯éœ€è¦çš„æ‰€æœ‰åŒ…

---

#### æ­¥éª¤ 4ï¼šè¿è¡Œ ESLint

```yaml
- name: Run ESLint
  working-directory: ./frontend
  run: npm run lint
```

**ä½œç”¨ï¼š**
- æ£€æŸ¥å‰ç«¯ä»£ç ï¼ˆTypeScript/Reactï¼‰
- å‘ç°é”™è¯¯ï¼šâŒ åœæ­¢æµç¨‹
- æ²¡æœ‰é—®é¢˜ï¼šâœ… ç»§ç»­

**å°±åƒï¼š** æ£€æŸ¥å‰ç«¯ä»£ç è´¨é‡

---

#### æ­¥éª¤ 5ï¼šæ„å»ºå‰ç«¯

```yaml
- name: Build frontend
  working-directory: ./frontend
  run: npm run build
```

**ä½œç”¨ï¼š**
- æ‰“åŒ…å‰ç«¯ä»£ç ï¼ˆç”Ÿæˆ `dist/` ç›®å½•ï¼‰
- æ„å»ºå¤±è´¥ï¼šâŒ åœæ­¢æµç¨‹
- æ„å»ºæˆåŠŸï¼šâœ… ç»§ç»­

**å°±åƒï¼š** æ‰“åŒ…å‰ç«¯åº”ç”¨ï¼Œå‡†å¤‡éƒ¨ç½²

---

## ğŸ³ ç¬¬äº”éƒ¨åˆ†ï¼šä»»åŠ¡ 4 - Docker æ„å»º

```yaml
docker-build:
  name: Docker Image Build
  runs-on: ubuntu-latest
  needs: [lint-and-format, test, frontend-check]
```

### ä»»åŠ¡è¯´æ˜

**ä»»åŠ¡åç§°ï¼š** `docker-build`  
**æ˜¾ç¤ºåç§°ï¼š** Docker Image Build  
**è¿è¡Œç¯å¢ƒï¼š** Ubuntu æœ€æ–°ç‰ˆ

**å…³é”®é…ç½®ï¼š** `needs: [lint-and-format, test, frontend-check]`

**ä½œç”¨ï¼š**
- â­ **ä¾èµ–å…³ç³»ï¼**
- åªæœ‰å‰é¢çš„ä»»åŠ¡éƒ½é€šè¿‡ï¼Œæ‰ä¼šè¿è¡Œè¿™ä¸ªä»»åŠ¡
- å¦‚æœä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼Œè¿™ä¸ªä»»åŠ¡ä¸ä¼šè¿è¡Œ

**å°±åƒï¼š** åªæœ‰å‰é¢çš„æ£€æŸ¥éƒ½é€šè¿‡ï¼Œæ‰æ‰“åŒ…

---

### æ­¥éª¤è¯¦è§£

#### æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 

```yaml
- name: Checkout code
  uses: actions/checkout@v4
```

**ä½œç”¨ï¼š** ä¸‹è½½ä»£ç 

---

#### æ­¥éª¤ 2ï¼šè®¾ç½® Docker Buildx

```yaml
- name: Set up Docker Buildx
  uses: docker/setup-buildx-action@v3
```

**ä½œç”¨ï¼š**
- è®¾ç½® Docker Buildxï¼ˆå¢å¼ºçš„æ„å»ºå·¥å…·ï¼‰
- æ”¯æŒç¼“å­˜ã€å¤šå¹³å°æ„å»ºç­‰åŠŸèƒ½

**å°±åƒï¼š** å‡†å¤‡ Docker æ„å»ºå·¥å…·

---

#### æ­¥éª¤ 3ï¼šæ„å»º Docker é•œåƒ â­ å…³é”®æ­¥éª¤

```yaml
- name: Build Docker image
  uses: docker/build-push-action@v5
  with:
    context: .
    file: ./docker/Dockerfile
    push: false
    tags: neurobreak:latest
    cache-from: type=gha
    cache-to: type=gha,mode=max
```

**è¯¦ç»†è§£é‡Šï¼š**

- `context: .` - æ„å»ºä¸Šä¸‹æ–‡æ˜¯å½“å‰ç›®å½•
- `file: ./docker/Dockerfile` - ä½¿ç”¨ `docker/Dockerfile` ä½œä¸ºæ„å»ºæ–‡ä»¶
- `push: false` - **ä¸æ¨é€é•œåƒ**ï¼ˆåªæ„å»ºï¼Œä¸ä¸Šä¼ ï¼‰
- `tags: neurobreak:latest` - é•œåƒæ ‡ç­¾ä¸º `neurobreak:latest`
- `cache-from: type=gha` - ä» GitHub Actions ç¼“å­˜è¯»å–
- `cache-to: type=gha,mode=max` - ä¿å­˜æ„å»ºç¼“å­˜åˆ° GitHub Actions

**å°±åƒï¼š** æ‰“åŒ…åº”ç”¨ï¼Œä½†ä¸å‘å¸ƒ

---

## ğŸ“Š å®Œæ•´æµç¨‹å›¾

```
ä½ æ¨é€ä»£ç  (git push)
    â†“
GitHub æ”¶åˆ°ä»£ç 
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡1: ä»£ç è´¨é‡æ£€æŸ¥              â”‚
â”‚  âœ“ Ruff (è¯­æ³•æ£€æŸ¥)              â”‚
â”‚  âœ“ Black (æ ¼å¼æ£€æŸ¥)             â”‚
â”‚  âœ“ isort (å¯¼å…¥æ’åº)             â”‚
â”‚  æ—¶é—´: ~2 åˆ†é’Ÿ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡2: è¿è¡Œæµ‹è¯•                  â”‚
â”‚  âœ“ pytest (å•å…ƒæµ‹è¯•)            â”‚
â”‚  âœ“ ä½¿ç”¨ Mock (ä¸åŠ è½½æ¨¡å‹)        â”‚
â”‚  âœ“ ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š                â”‚
â”‚  æ—¶é—´: ~3 åˆ†é’Ÿ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡3: å‰ç«¯æ£€æŸ¥                  â”‚
â”‚  âœ“ ESLint (ä»£ç æ£€æŸ¥)            â”‚
â”‚  âœ“ Build (æ„å»ºæµ‹è¯•)             â”‚
â”‚  æ—¶é—´: ~2 åˆ†é’Ÿ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡4: Docker æ„å»º               â”‚
â”‚  âœ“ æ„å»ºé•œåƒ                      â”‚
â”‚  âœ“ ä½¿ç”¨ç¼“å­˜åŠ é€Ÿ                  â”‚
â”‚  æ—¶é—´: ~5 åˆ†é’Ÿ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼                â”‚
â”‚ ä»£ç å¯ä»¥åˆå¹¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ€»æ—¶é—´ï¼š** çº¦ 12 åˆ†é’Ÿï¼ˆå¹¶è¡Œè¿è¡Œä¼šæ›´å¿«ï¼‰

---

## ğŸ”‘ å…³é”®é…ç½®ç‚¹

### 1. ç¯å¢ƒå˜é‡ï¼š`SKIP_MODEL_LOAD: "true"`

```yaml
env:
  SKIP_MODEL_LOAD: "true"
```

**ä½œç”¨ï¼š**
- å‘Šè¯‰æµ‹è¯•ç¯å¢ƒä¸è¦åŠ è½½çœŸå®æ¨¡å‹
- ä½¿ç”¨ Mock å¯¹è±¡æ›¿ä»£
- è®©æµ‹è¯•å¯ä»¥åœ¨æ²¡æœ‰æ¨¡å‹çš„æƒ…å†µä¸‹è¿è¡Œ

**ä½ç½®ï¼š** ä»»åŠ¡2ï¼ˆtestï¼‰çš„æ­¥éª¤4

---

### 2. ä¾èµ–å…³ç³»ï¼š`needs`

```yaml
needs: [lint-and-format, test, frontend-check]
```

**ä½œç”¨ï¼š**
- Docker æ„å»ºä»»åŠ¡ä¾èµ–å‰é¢ä¸‰ä¸ªä»»åŠ¡
- åªæœ‰å‰é¢éƒ½é€šè¿‡ï¼Œæ‰ä¼šè¿è¡Œ
- èŠ‚çœèµ„æºï¼Œé¿å…ä¸å¿…è¦çš„æ„å»º

**ä½ç½®ï¼š** ä»»åŠ¡4ï¼ˆdocker-buildï¼‰

---

### 3. ç¼“å­˜é…ç½®

**Python ç¼“å­˜ï¼š**
```yaml
cache: 'pip'
```

**Node.js ç¼“å­˜ï¼š**
```yaml
cache: 'npm'
cache-dependency-path: frontend/package-lock.json
```

**Docker ç¼“å­˜ï¼š**
```yaml
cache-from: type=gha
cache-to: type=gha,mode=max
```

**ä½œç”¨ï¼š**
- åŠ é€Ÿä¾èµ–å®‰è£…
- åŠ é€Ÿ Docker æ„å»º
- èŠ‚çœ CI æ—¶é—´

---

## ğŸ¯ ä»»åŠ¡å¹¶è¡Œè¿è¡Œ

### å¹¶è¡Œä»»åŠ¡ï¼ˆåŒæ—¶è¿è¡Œï¼‰

```
ä»»åŠ¡1: lint-and-format â”€â”
ä»»åŠ¡2: test              â”œâ”€â†’ åŒæ—¶è¿è¡Œï¼ˆä¸äº’ç›¸ä¾èµ–ï¼‰
ä»»åŠ¡3: frontend-check   â”€â”˜
```

### ä¸²è¡Œä»»åŠ¡ï¼ˆæŒ‰é¡ºåºè¿è¡Œï¼‰

```
ä»»åŠ¡1-3 éƒ½é€šè¿‡
    â†“
ä»»åŠ¡4: docker-build  â† ä¾èµ–å‰é¢ä¸‰ä¸ªä»»åŠ¡
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. ä½¿ç”¨ç¼“å­˜

- âœ… Python pip ç¼“å­˜
- âœ… Node.js npm ç¼“å­˜
- âœ… Docker æ„å»ºç¼“å­˜

**æ•ˆæœï¼š** ç¬¬äºŒæ¬¡è¿è¡Œä¼šæ›´å¿«

### 2. å¹¶è¡Œè¿è¡Œ

- âœ… ä»»åŠ¡1ã€2ã€3 åŒæ—¶è¿è¡Œ
- âœ… ä¸äº’ç›¸ç­‰å¾…

**æ•ˆæœï¼š** æ€»æ—¶é—´ = æœ€æ…¢çš„ä»»åŠ¡æ—¶é—´

### 3. æ¡ä»¶æ‰§è¡Œ

- âœ… åªæœ‰å‰é¢é€šè¿‡æ‰è¿è¡Œ Docker æ„å»º
- âœ… é¿å…æµªè´¹èµ„æº

**æ•ˆæœï¼š** èŠ‚çœ CI æ—¶é—´

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæµ‹è¯•ä»»åŠ¡è®¾ç½®äº† `SKIP_MODEL_LOAD: "true"`ï¼Ÿ

**A:** å› ä¸º CI ç¯å¢ƒæ²¡æœ‰ä½ çš„æœ¬åœ°æ¨¡å‹ï¼Œä½¿ç”¨ Mock å¯ä»¥è®©æµ‹è¯•æ­£å¸¸è¿è¡Œã€‚

### Q2: Docker æ„å»ºä¼šæ¨é€é•œåƒå—ï¼Ÿ

**A:** ä¸ä¼šã€‚`push: false` è¡¨ç¤ºåªæ„å»ºï¼Œä¸ä¸Šä¼ ã€‚

### Q3: å¦‚æœæŸä¸ªä»»åŠ¡å¤±è´¥ä¼šæ€æ ·ï¼Ÿ

**A:** 
- å¦‚æœä»»åŠ¡1-3å¤±è´¥ï¼Œä»»åŠ¡4ä¸ä¼šè¿è¡Œ
- æ•´ä¸ª CI/CD æ ‡è®°ä¸ºå¤±è´¥
- ä½ éœ€è¦ä¿®å¤é—®é¢˜åé‡æ–°æ¨é€

### Q4: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„è¿è¡Œæ—¥å¿—ï¼Ÿ

**A:**
1. æ‰“å¼€ GitHub â†’ Actions
2. ç‚¹å‡»è¿è¡Œè®°å½•
3. ç‚¹å‡»å…·ä½“ä»»åŠ¡
4. æŸ¥çœ‹æ­¥éª¤æ—¥å¿—

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `.github/workflows/ci.yml` - CI/CD é…ç½®æ–‡ä»¶
- `pyproject.toml` - pytest é…ç½®
- `tests/conftest.py` - Mock é…ç½®
- `docker/Dockerfile` - Docker æ„å»ºæ–‡ä»¶

---

## âœ… æ€»ç»“

ä½ çš„ CI/CD é…ç½®åŒ…å«ï¼š

1. âœ… **ä»£ç è´¨é‡æ£€æŸ¥** - ruff, black, isort
2. âœ… **è¿è¡Œæµ‹è¯•** - pytest + Mock
3. âœ… **å‰ç«¯æ£€æŸ¥** - ESLint + æ„å»º
4. âœ… **Docker æ„å»º** - æ„å»ºé•œåƒ

**å…³é”®ç‰¹æ€§ï¼š**
- âœ… æ”¯æŒæœ¬åœ°æ¨¡å‹ï¼ˆä½¿ç”¨ Mockï¼‰
- âœ… å¹¶è¡Œè¿è¡Œï¼ˆæé«˜é€Ÿåº¦ï¼‰
- âœ… ä½¿ç”¨ç¼“å­˜ï¼ˆåŠ é€Ÿæ„å»ºï¼‰
- âœ… ä¾èµ–å…³ç³»ï¼ˆèŠ‚çœèµ„æºï¼‰

**ç°åœ¨ä½ çš„ CI/CD å·²ç»å®Œå…¨é…ç½®å¥½äº†ï¼** ğŸ‰

